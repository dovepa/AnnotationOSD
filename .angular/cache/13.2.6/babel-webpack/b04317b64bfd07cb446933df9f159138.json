{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"/home/dove/Documents/tchek/AnnotationOSD/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nconst path = require(\"path\");\nconst fs = require(\"fs\").promises;\nconst vm = require(\"vm\");\nconst toughCookie = require(\"tough-cookie\");\nconst sniffHTMLEncoding = require(\"html-encoding-sniffer\");\nconst whatwgURL = require(\"whatwg-url\");\nconst whatwgEncoding = require(\"whatwg-encoding\");\nconst {\n  URL\n} = require(\"whatwg-url\");\nconst MIMEType = require(\"whatwg-mimetype\");\nconst idlUtils = require(\"./jsdom/living/generated/utils.js\");\nconst VirtualConsole = require(\"./jsdom/virtual-console.js\");\nconst {\n  createWindow\n} = require(\"./jsdom/browser/Window.js\");\nconst {\n  parseIntoDocument\n} = require(\"./jsdom/browser/parser\");\nconst {\n  fragmentSerialization\n} = require(\"./jsdom/living/domparsing/serialization.js\");\nconst ResourceLoader = require(\"./jsdom/browser/resources/resource-loader.js\");\nconst NoOpResourceLoader = require(\"./jsdom/browser/resources/no-op-resource-loader.js\");\nclass CookieJar extends toughCookie.CookieJar {\n  constructor(store, options) {\n    // jsdom cookie jars must be loose by default\n    super(store, {\n      looseMode: true,\n      ...options\n    });\n  }\n}\nconst window = Symbol(\"window\");\nlet sharedFragmentDocument = null;\nclass JSDOM {\n  constructor(input = \"\", options = {}) {\n    const mimeType = new MIMEType(options.contentType === undefined ? \"text/html\" : options.contentType);\n    const {\n      html,\n      encoding\n    } = normalizeHTML(input, mimeType);\n    options = transformOptions(options, encoding, mimeType);\n    this[window] = createWindow(options.windowOptions);\n    const documentImpl = idlUtils.implForWrapper(this[window]._document);\n    options.beforeParse(this[window]._globalProxy);\n    parseIntoDocument(html, documentImpl);\n    documentImpl.close();\n  }\n  get window() {\n    // It's important to grab the global proxy, instead of just the result of `createWindow(...)`, since otherwise\n    // things like `window.eval` don't exist.\n    return this[window]._globalProxy;\n  }\n  get virtualConsole() {\n    return this[window]._virtualConsole;\n  }\n  get cookieJar() {\n    // TODO NEWAPI move _cookieJar to window probably\n    return idlUtils.implForWrapper(this[window]._document)._cookieJar;\n  }\n  serialize() {\n    return fragmentSerialization(idlUtils.implForWrapper(this[window]._document), {\n      requireWellFormed: false\n    });\n  }\n  nodeLocation(node) {\n    if (!idlUtils.implForWrapper(this[window]._document)._parseOptions.sourceCodeLocationInfo) {\n      throw new Error(\"Location information was not saved for this jsdom. Use includeNodeLocations during creation.\");\n    }\n    return idlUtils.implForWrapper(node).sourceCodeLocation;\n  }\n  getInternalVMContext() {\n    if (!vm.isContext(this[window])) {\n      throw new TypeError(\"This jsdom was not configured to allow script running. \" + \"Use the runScripts option during creation.\");\n    }\n    return this[window];\n  }\n  reconfigure(settings) {\n    if (\"windowTop\" in settings) {\n      this[window]._top = settings.windowTop;\n    }\n    if (\"url\" in settings) {\n      const document = idlUtils.implForWrapper(this[window]._document);\n      const url = whatwgURL.parseURL(settings.url);\n      if (url === null) {\n        throw new TypeError(`Could not parse \"${settings.url}\" as a URL`);\n      }\n      document._URL = url;\n      document._origin = whatwgURL.serializeURLOrigin(document._URL);\n    }\n  }\n  static fragment(string = \"\") {\n    if (!sharedFragmentDocument) {\n      sharedFragmentDocument = new JSDOM().window.document;\n    }\n    const template = sharedFragmentDocument.createElement(\"template\");\n    template.innerHTML = string;\n    return template.content;\n  }\n  static fromURL(url, options = {}) {\n    return Promise.resolve().then(() => {\n      // Remove the hash while sending this through the research loader fetch().\n      // It gets added back a few lines down when constructing the JSDOM object.\n      const parsedURL = new URL(url);\n      const originalHash = parsedURL.hash;\n      parsedURL.hash = \"\";\n      url = parsedURL.href;\n      options = normalizeFromURLOptions(options);\n      const resourceLoader = resourcesToResourceLoader(options.resources);\n      const resourceLoaderForInitialRequest = resourceLoader.constructor === NoOpResourceLoader ? new ResourceLoader() : resourceLoader;\n      const req = resourceLoaderForInitialRequest.fetch(url, {\n        accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n        cookieJar: options.cookieJar,\n        referrer: options.referrer\n      });\n      return req.then(body => {\n        const res = req.response;\n        options = Object.assign(options, {\n          url: req.href + originalHash,\n          contentType: res.headers[\"content-type\"],\n          referrer: req.getHeader(\"referer\") ?? undefined\n        });\n        return new JSDOM(body, options);\n      });\n    });\n  }\n  static fromFile(filename, options = {}) {\n    return _asyncToGenerator(function* () {\n      options = normalizeFromFileOptions(filename, options);\n      const buffer = yield fs.readFile(filename);\n      return new JSDOM(buffer, options);\n    })();\n  }\n}\nfunction normalizeFromURLOptions(options) {\n  // Checks on options that are invalid for `fromURL`\n  if (options.url !== undefined) {\n    throw new TypeError(\"Cannot supply a url option when using fromURL\");\n  }\n  if (options.contentType !== undefined) {\n    throw new TypeError(\"Cannot supply a contentType option when using fromURL\");\n  }\n\n  // Normalization of options which must be done before the rest of the fromURL code can use them, because they are\n  // given to request()\n  const normalized = {\n    ...options\n  };\n  if (options.referrer !== undefined) {\n    normalized.referrer = new URL(options.referrer).href;\n  }\n  if (options.cookieJar === undefined) {\n    normalized.cookieJar = new CookieJar();\n  }\n  return normalized;\n\n  // All other options don't need to be processed yet, and can be taken care of in the normal course of things when\n  // `fromURL` calls `new JSDOM(html, options)`.\n}\n\nfunction normalizeFromFileOptions(filename, options) {\n  const normalized = {\n    ...options\n  };\n  if (normalized.contentType === undefined) {\n    const extname = path.extname(filename);\n    if (extname === \".xhtml\" || extname === \".xht\" || extname === \".xml\") {\n      normalized.contentType = \"application/xhtml+xml\";\n    }\n  }\n  if (normalized.url === undefined) {\n    normalized.url = new URL(\"file:\" + path.resolve(filename));\n  }\n  return normalized;\n}\nfunction transformOptions(options, encoding, mimeType) {\n  const transformed = {\n    windowOptions: {\n      // Defaults\n      url: \"about:blank\",\n      referrer: \"\",\n      contentType: \"text/html\",\n      parsingMode: \"html\",\n      parseOptions: {\n        sourceCodeLocationInfo: false,\n        scriptingEnabled: false\n      },\n      runScripts: undefined,\n      encoding,\n      pretendToBeVisual: false,\n      storageQuota: 5000000,\n      // Defaults filled in later\n      resourceLoader: undefined,\n      virtualConsole: undefined,\n      cookieJar: undefined\n    },\n    // Defaults\n    beforeParse() {}\n  };\n\n  // options.contentType was parsed into mimeType by the caller.\n  if (!mimeType.isHTML() && !mimeType.isXML()) {\n    throw new RangeError(`The given content type of \"${options.contentType}\" was not a HTML or XML content type`);\n  }\n  transformed.windowOptions.contentType = mimeType.essence;\n  transformed.windowOptions.parsingMode = mimeType.isHTML() ? \"html\" : \"xml\";\n  if (options.url !== undefined) {\n    transformed.windowOptions.url = new URL(options.url).href;\n  }\n  if (options.referrer !== undefined) {\n    transformed.windowOptions.referrer = new URL(options.referrer).href;\n  }\n  if (options.includeNodeLocations) {\n    if (transformed.windowOptions.parsingMode === \"xml\") {\n      throw new TypeError(\"Cannot set includeNodeLocations to true with an XML content type\");\n    }\n    transformed.windowOptions.parseOptions = {\n      sourceCodeLocationInfo: true\n    };\n  }\n  transformed.windowOptions.cookieJar = options.cookieJar === undefined ? new CookieJar() : options.cookieJar;\n  transformed.windowOptions.virtualConsole = options.virtualConsole === undefined ? new VirtualConsole().sendTo(console) : options.virtualConsole;\n  if (!(transformed.windowOptions.virtualConsole instanceof VirtualConsole)) {\n    throw new TypeError(\"virtualConsole must be an instance of VirtualConsole\");\n  }\n  transformed.windowOptions.resourceLoader = resourcesToResourceLoader(options.resources);\n  if (options.runScripts !== undefined) {\n    transformed.windowOptions.runScripts = String(options.runScripts);\n    if (transformed.windowOptions.runScripts === \"dangerously\") {\n      transformed.windowOptions.parseOptions.scriptingEnabled = true;\n    } else if (transformed.windowOptions.runScripts !== \"outside-only\") {\n      throw new RangeError(`runScripts must be undefined, \"dangerously\", or \"outside-only\"`);\n    }\n  }\n  if (options.beforeParse !== undefined) {\n    transformed.beforeParse = options.beforeParse;\n  }\n  if (options.pretendToBeVisual !== undefined) {\n    transformed.windowOptions.pretendToBeVisual = Boolean(options.pretendToBeVisual);\n  }\n  if (options.storageQuota !== undefined) {\n    transformed.windowOptions.storageQuota = Number(options.storageQuota);\n  }\n  return transformed;\n}\nfunction normalizeHTML(html, mimeType) {\n  let encoding = \"UTF-8\";\n  if (ArrayBuffer.isView(html)) {\n    html = Buffer.from(html.buffer, html.byteOffset, html.byteLength);\n  } else if (html instanceof ArrayBuffer) {\n    html = Buffer.from(html);\n  }\n  if (Buffer.isBuffer(html)) {\n    encoding = sniffHTMLEncoding(html, {\n      defaultEncoding: mimeType.isXML() ? \"UTF-8\" : \"windows-1252\",\n      transportLayerEncodingLabel: mimeType.parameters.get(\"charset\")\n    });\n    html = whatwgEncoding.decode(html, encoding);\n  } else {\n    html = String(html);\n  }\n  return {\n    html,\n    encoding\n  };\n}\nfunction resourcesToResourceLoader(resources) {\n  switch (resources) {\n    case undefined:\n      {\n        return new NoOpResourceLoader();\n      }\n    case \"usable\":\n      {\n        return new ResourceLoader();\n      }\n    default:\n      {\n        if (!(resources instanceof ResourceLoader)) {\n          throw new TypeError(\"resources must be an instance of ResourceLoader\");\n        }\n        return resources;\n      }\n  }\n}\nexports.JSDOM = JSDOM;\nexports.VirtualConsole = VirtualConsole;\nexports.CookieJar = CookieJar;\nexports.ResourceLoader = ResourceLoader;\nexports.toughCookie = toughCookie;","map":{"version":3,"names":["path","require","fs","promises","vm","toughCookie","sniffHTMLEncoding","whatwgURL","whatwgEncoding","URL","MIMEType","idlUtils","VirtualConsole","createWindow","parseIntoDocument","fragmentSerialization","ResourceLoader","NoOpResourceLoader","CookieJar","constructor","store","options","looseMode","window","Symbol","sharedFragmentDocument","JSDOM","input","mimeType","contentType","undefined","html","encoding","normalizeHTML","transformOptions","windowOptions","documentImpl","implForWrapper","_document","beforeParse","_globalProxy","close","virtualConsole","_virtualConsole","cookieJar","_cookieJar","serialize","requireWellFormed","nodeLocation","node","_parseOptions","sourceCodeLocationInfo","Error","sourceCodeLocation","getInternalVMContext","isContext","TypeError","reconfigure","settings","_top","windowTop","document","url","parseURL","_URL","_origin","serializeURLOrigin","fragment","string","template","createElement","innerHTML","content","fromURL","Promise","resolve","then","parsedURL","originalHash","hash","href","normalizeFromURLOptions","resourceLoader","resourcesToResourceLoader","resources","resourceLoaderForInitialRequest","req","fetch","accept","referrer","body","res","response","Object","assign","headers","getHeader","fromFile","filename","normalizeFromFileOptions","buffer","readFile","normalized","extname","transformed","parsingMode","parseOptions","scriptingEnabled","runScripts","pretendToBeVisual","storageQuota","isHTML","isXML","RangeError","essence","includeNodeLocations","sendTo","console","String","Boolean","Number","ArrayBuffer","isView","Buffer","from","byteOffset","byteLength","isBuffer","defaultEncoding","transportLayerEncodingLabel","parameters","get","decode","exports"],"sources":["/home/dove/Documents/tchek/AnnotationOSD/node_modules/jsdom/lib/api.js"],"sourcesContent":["\"use strict\";\nconst path = require(\"path\");\nconst fs = require(\"fs\").promises;\nconst vm = require(\"vm\");\nconst toughCookie = require(\"tough-cookie\");\nconst sniffHTMLEncoding = require(\"html-encoding-sniffer\");\nconst whatwgURL = require(\"whatwg-url\");\nconst whatwgEncoding = require(\"whatwg-encoding\");\nconst { URL } = require(\"whatwg-url\");\nconst MIMEType = require(\"whatwg-mimetype\");\nconst idlUtils = require(\"./jsdom/living/generated/utils.js\");\nconst VirtualConsole = require(\"./jsdom/virtual-console.js\");\nconst { createWindow } = require(\"./jsdom/browser/Window.js\");\nconst { parseIntoDocument } = require(\"./jsdom/browser/parser\");\nconst { fragmentSerialization } = require(\"./jsdom/living/domparsing/serialization.js\");\nconst ResourceLoader = require(\"./jsdom/browser/resources/resource-loader.js\");\nconst NoOpResourceLoader = require(\"./jsdom/browser/resources/no-op-resource-loader.js\");\n\nclass CookieJar extends toughCookie.CookieJar {\n  constructor(store, options) {\n    // jsdom cookie jars must be loose by default\n    super(store, { looseMode: true, ...options });\n  }\n}\n\nconst window = Symbol(\"window\");\nlet sharedFragmentDocument = null;\n\nclass JSDOM {\n  constructor(input = \"\", options = {}) {\n    const mimeType = new MIMEType(options.contentType === undefined ? \"text/html\" : options.contentType);\n    const { html, encoding } = normalizeHTML(input, mimeType);\n\n    options = transformOptions(options, encoding, mimeType);\n\n    this[window] = createWindow(options.windowOptions);\n\n    const documentImpl = idlUtils.implForWrapper(this[window]._document);\n\n    options.beforeParse(this[window]._globalProxy);\n\n    parseIntoDocument(html, documentImpl);\n\n    documentImpl.close();\n  }\n\n  get window() {\n    // It's important to grab the global proxy, instead of just the result of `createWindow(...)`, since otherwise\n    // things like `window.eval` don't exist.\n    return this[window]._globalProxy;\n  }\n\n  get virtualConsole() {\n    return this[window]._virtualConsole;\n  }\n\n  get cookieJar() {\n    // TODO NEWAPI move _cookieJar to window probably\n    return idlUtils.implForWrapper(this[window]._document)._cookieJar;\n  }\n\n  serialize() {\n    return fragmentSerialization(idlUtils.implForWrapper(this[window]._document), { requireWellFormed: false });\n  }\n\n  nodeLocation(node) {\n    if (!idlUtils.implForWrapper(this[window]._document)._parseOptions.sourceCodeLocationInfo) {\n      throw new Error(\"Location information was not saved for this jsdom. Use includeNodeLocations during creation.\");\n    }\n\n    return idlUtils.implForWrapper(node).sourceCodeLocation;\n  }\n\n  getInternalVMContext() {\n    if (!vm.isContext(this[window])) {\n      throw new TypeError(\"This jsdom was not configured to allow script running. \" +\n        \"Use the runScripts option during creation.\");\n    }\n\n    return this[window];\n  }\n\n  reconfigure(settings) {\n    if (\"windowTop\" in settings) {\n      this[window]._top = settings.windowTop;\n    }\n\n    if (\"url\" in settings) {\n      const document = idlUtils.implForWrapper(this[window]._document);\n\n      const url = whatwgURL.parseURL(settings.url);\n      if (url === null) {\n        throw new TypeError(`Could not parse \"${settings.url}\" as a URL`);\n      }\n\n      document._URL = url;\n      document._origin = whatwgURL.serializeURLOrigin(document._URL);\n    }\n  }\n\n  static fragment(string = \"\") {\n    if (!sharedFragmentDocument) {\n      sharedFragmentDocument = (new JSDOM()).window.document;\n    }\n\n    const template = sharedFragmentDocument.createElement(\"template\");\n    template.innerHTML = string;\n    return template.content;\n  }\n\n  static fromURL(url, options = {}) {\n    return Promise.resolve().then(() => {\n      // Remove the hash while sending this through the research loader fetch().\n      // It gets added back a few lines down when constructing the JSDOM object.\n      const parsedURL = new URL(url);\n      const originalHash = parsedURL.hash;\n      parsedURL.hash = \"\";\n      url = parsedURL.href;\n\n      options = normalizeFromURLOptions(options);\n\n      const resourceLoader = resourcesToResourceLoader(options.resources);\n      const resourceLoaderForInitialRequest = resourceLoader.constructor === NoOpResourceLoader ?\n        new ResourceLoader() :\n        resourceLoader;\n\n      const req = resourceLoaderForInitialRequest.fetch(url, {\n        accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n        cookieJar: options.cookieJar,\n        referrer: options.referrer\n      });\n\n      return req.then(body => {\n        const res = req.response;\n\n        options = Object.assign(options, {\n          url: req.href + originalHash,\n          contentType: res.headers[\"content-type\"],\n          referrer: req.getHeader(\"referer\") ?? undefined\n        });\n\n        return new JSDOM(body, options);\n      });\n    });\n  }\n\n  static async fromFile(filename, options = {}) {\n    options = normalizeFromFileOptions(filename, options);\n    const buffer = await fs.readFile(filename);\n\n    return new JSDOM(buffer, options);\n  }\n}\n\nfunction normalizeFromURLOptions(options) {\n  // Checks on options that are invalid for `fromURL`\n  if (options.url !== undefined) {\n    throw new TypeError(\"Cannot supply a url option when using fromURL\");\n  }\n  if (options.contentType !== undefined) {\n    throw new TypeError(\"Cannot supply a contentType option when using fromURL\");\n  }\n\n  // Normalization of options which must be done before the rest of the fromURL code can use them, because they are\n  // given to request()\n  const normalized = { ...options };\n\n  if (options.referrer !== undefined) {\n    normalized.referrer = (new URL(options.referrer)).href;\n  }\n\n  if (options.cookieJar === undefined) {\n    normalized.cookieJar = new CookieJar();\n  }\n\n  return normalized;\n\n  // All other options don't need to be processed yet, and can be taken care of in the normal course of things when\n  // `fromURL` calls `new JSDOM(html, options)`.\n}\n\nfunction normalizeFromFileOptions(filename, options) {\n  const normalized = { ...options };\n\n  if (normalized.contentType === undefined) {\n    const extname = path.extname(filename);\n    if (extname === \".xhtml\" || extname === \".xht\" || extname === \".xml\") {\n      normalized.contentType = \"application/xhtml+xml\";\n    }\n  }\n\n  if (normalized.url === undefined) {\n    normalized.url = new URL(\"file:\" + path.resolve(filename));\n  }\n\n  return normalized;\n}\n\nfunction transformOptions(options, encoding, mimeType) {\n  const transformed = {\n    windowOptions: {\n      // Defaults\n      url: \"about:blank\",\n      referrer: \"\",\n      contentType: \"text/html\",\n      parsingMode: \"html\",\n      parseOptions: {\n        sourceCodeLocationInfo: false,\n        scriptingEnabled: false\n      },\n      runScripts: undefined,\n      encoding,\n      pretendToBeVisual: false,\n      storageQuota: 5000000,\n\n      // Defaults filled in later\n      resourceLoader: undefined,\n      virtualConsole: undefined,\n      cookieJar: undefined\n    },\n\n    // Defaults\n    beforeParse() { }\n  };\n\n  // options.contentType was parsed into mimeType by the caller.\n  if (!mimeType.isHTML() && !mimeType.isXML()) {\n    throw new RangeError(`The given content type of \"${options.contentType}\" was not a HTML or XML content type`);\n  }\n\n  transformed.windowOptions.contentType = mimeType.essence;\n  transformed.windowOptions.parsingMode = mimeType.isHTML() ? \"html\" : \"xml\";\n\n  if (options.url !== undefined) {\n    transformed.windowOptions.url = (new URL(options.url)).href;\n  }\n\n  if (options.referrer !== undefined) {\n    transformed.windowOptions.referrer = (new URL(options.referrer)).href;\n  }\n\n  if (options.includeNodeLocations) {\n    if (transformed.windowOptions.parsingMode === \"xml\") {\n      throw new TypeError(\"Cannot set includeNodeLocations to true with an XML content type\");\n    }\n\n    transformed.windowOptions.parseOptions = { sourceCodeLocationInfo: true };\n  }\n\n  transformed.windowOptions.cookieJar = options.cookieJar === undefined ?\n                                       new CookieJar() :\n                                       options.cookieJar;\n\n  transformed.windowOptions.virtualConsole = options.virtualConsole === undefined ?\n                                            (new VirtualConsole()).sendTo(console) :\n                                            options.virtualConsole;\n\n  if (!(transformed.windowOptions.virtualConsole instanceof VirtualConsole)) {\n    throw new TypeError(\"virtualConsole must be an instance of VirtualConsole\");\n  }\n\n  transformed.windowOptions.resourceLoader = resourcesToResourceLoader(options.resources);\n\n  if (options.runScripts !== undefined) {\n    transformed.windowOptions.runScripts = String(options.runScripts);\n    if (transformed.windowOptions.runScripts === \"dangerously\") {\n      transformed.windowOptions.parseOptions.scriptingEnabled = true;\n    } else if (transformed.windowOptions.runScripts !== \"outside-only\") {\n      throw new RangeError(`runScripts must be undefined, \"dangerously\", or \"outside-only\"`);\n    }\n  }\n\n  if (options.beforeParse !== undefined) {\n    transformed.beforeParse = options.beforeParse;\n  }\n\n  if (options.pretendToBeVisual !== undefined) {\n    transformed.windowOptions.pretendToBeVisual = Boolean(options.pretendToBeVisual);\n  }\n\n  if (options.storageQuota !== undefined) {\n    transformed.windowOptions.storageQuota = Number(options.storageQuota);\n  }\n\n  return transformed;\n}\n\nfunction normalizeHTML(html, mimeType) {\n  let encoding = \"UTF-8\";\n\n  if (ArrayBuffer.isView(html)) {\n    html = Buffer.from(html.buffer, html.byteOffset, html.byteLength);\n  } else if (html instanceof ArrayBuffer) {\n    html = Buffer.from(html);\n  }\n\n  if (Buffer.isBuffer(html)) {\n    encoding = sniffHTMLEncoding(html, {\n      defaultEncoding: mimeType.isXML() ? \"UTF-8\" : \"windows-1252\",\n      transportLayerEncodingLabel: mimeType.parameters.get(\"charset\")\n    });\n    html = whatwgEncoding.decode(html, encoding);\n  } else {\n    html = String(html);\n  }\n\n  return { html, encoding };\n}\n\nfunction resourcesToResourceLoader(resources) {\n  switch (resources) {\n    case undefined: {\n      return new NoOpResourceLoader();\n    }\n    case \"usable\": {\n      return new ResourceLoader();\n    }\n    default: {\n      if (!(resources instanceof ResourceLoader)) {\n        throw new TypeError(\"resources must be an instance of ResourceLoader\");\n      }\n      return resources;\n    }\n  }\n}\n\nexports.JSDOM = JSDOM;\n\nexports.VirtualConsole = VirtualConsole;\nexports.CookieJar = CookieJar;\nexports.ResourceLoader = ResourceLoader;\n\nexports.toughCookie = toughCookie;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}